<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ant-design-vue/1.7.8/antd.min.css">
</head>

<body>
  <div id="app">
    <a-layout>
      <a-layout-header>
        <div class="logo">NaiveFileManager</div>
      </a-layout-header>
      <a-layout-content style="padding: 24px;">
        <a-table :columns="columns" :data-source="files" row-key="name" />
      </a-layout-content>
    </a-layout>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ant-design-vue/1.7.8/antd.min.js"></script>
  <script>
    new Vue({
      el: '#app',
      data() {
        return {
          columns: [
            { title: 'Name', dataIndex: 'name', key: 'name' },
            { title: 'Size', dataIndex: 'size', key: 'size' },
            { title: 'Type', dataIndex: 'type', key: 'type' },
            { title: 'Last Modified', dataIndex: 'last_modified', key: 'last_modified' }
          ],
          files: []
        };
      },
      mounted() {
        this.fetchFiles();
      },
      methods: {
        fetchFiles() {
          fetch('http://127.0.0.1:8000/api/file/list?path=/', {
            credentials: 'include'
          })
            .then(response => response.json())
            .then(data => {
              if (data.status === 'success') {
                this.files = data.data.items;
              }
            });
        }
      }
    });
  </script>
</body>

</html>