NaiveFileManager 在线文件管理系统需求规格说明书
===

## 1. 引言

### 1.1 目的

本需求规格说明书旨在明确 NaiveFileManager 在线文件管理系统的功能需求、性能需求、安全需求以及用户界面需求，确保开发者能够准确理解和实现系统功能，同时作为后续系统设计、开发和测试的依据。

### 1.2 范围

本系统旨在提供一个在线平台，使运维人员和管理人员能够在浏览器中便捷地管理 Linux 服务器上的文件，管理人员能够进行用户管理和日志审计。系统基于 FastAPI 框架，遵循 OpenAPI 3.1 规范。

### 1.3 定义、缩写和术语

- **FastAPI**: 一个现代、快速、高性能的 Web 框架，用于构建 API 服务。
- **OpenAPI**: 一种规范，用于定义和描述 RESTful APIs。
- **运维人员（普通用户）**: 负责系统维护、监控、故障排查等工作的专业人员。
- **管理人员（管理员）**: 负责用户管理、权限分配等管理工作的专业人员。
- **行为审计**: 记录并跟踪用户操作的系统功能，用于安全审计和合规性检查。

## 2. 总体描述

### 2.1 产品视角

本系统将提供一个用户友好的在线界面，允许运维人员和管理人员通过浏览器访问，实现对 Linux 服务器上文件的便捷管理，包括创建文件、编辑文件、删除文件、权限修改等功能。同时，管理人员可以管理系统中的用户，设置用户的基础目录，限制用户的访问范围，并对用户的行为进行审计，确保系统安全和合规性。

### 2.2 系统架构

系统采用前后端分离架构，前端使用 Vue 2 现代前端框架，后端使用 FastAPI 框架。系统数据存储在本地 JSON 文件中，文件操作依赖 Linux 服务器的文件系统。

### 2.3 用户特征

- **目标用户**：运维人员和管理人员
- **技能水平**：熟悉 Linux 操作系统和基本的 Web 操作
- **使用场景**：日常运维和管理工作，如文件管理、权限管理、用户管理等

## 3. 具体需求

### 3.1 用户管理功能

#### 3.1.1 用户登录

- **功能描述**：用户通过用户名和密码登录系统。
- **输入**：用户名、密码
- **输出**：登录状态

#### 3.1.2 用户注销

- **功能描述**：用户主动注销当前会话。
- **输入**：无
- **输出**：注销状态

#### 3.1.3 用户列表

- **功能描述**：管理员获取系统中所有用户的信息。
- **输入**：无
- **输出**：用户列表

#### 3.1.4 创建用户

- **功能描述**：管理员创建新用户，并分配基础目录和权限。
- **输入**：用户名、密码、基础目录、权限
- **输出**：创建结果

#### 3.1.5 更新用户

- **功能描述**：管理员更新用户信息（如密码、基础目录、权限等）。
- **输入**：用户 ID、更新字段
- **输出**：更新结果

#### 3.1.6 删除用户

- **功能描述**：管理员删除指定用户。
- **输入**：用户 ID
- **输出**：删除结果

#### 3.1.7 修改密码

- **功能描述**：用户修改自己的密码。
- **输入**：旧密码、新密码
- **输出**：修改结果

### 3.2 文件管理功能

#### 3.2.1 文件列表

- **功能描述**：用户获取指定目录下的文件列表。
- **输入**：目录路径
- **输出**：文件列表

#### 3.2.2 文件下载

- **功能描述**：用户下载指定文件。
- **输入**：文件路径
- **输出**：文件内容（二进制）

#### 3.2.3 文件读取

- **功能描述**：用户在线读取文件内容。
- **输入**：文件路径
- **输出**：文件内容（文本）

#### 3.2.4 文件写入

- **功能描述**：用户在线编辑并保存文件内容。
- **输入**：文件路径、新内容
- **输出**：保存结果

#### 3.2.5 文件权限管理

- **功能描述**：用户设置或修改文件的权限。
- **输入**：文件路径、权限设置
- **输出**：设置结果

#### 3.2.6 文件移动

- **功能描述**：用户移动文件到指定目录。
- **输入**：源文件路径、目标目录
- **输出**：移动结果

#### 3.2.7 删除文件

- **功能描述**：用户删除指定文件。
- **输入**：文件路径
- **输出**：删除结果

#### 3.2.8 创建文件

- **功能描述**：用户在指定目录下创建新文件。
- **输入**：目录路径、文件名
- **输出**：创建结果

#### 3.2.9 上传文件

- **功能描述**：用户上传文件到指定目录。
- **输入**：目录路径、文件内容（二进制）
- **输出**：上传结果

#### 3.2.10 操作系统用户组列表

- **功能描述**：用户获取 Linux 操作系统用户组列表。
- **输入**：无
- **输出**：操作系统用户组列表

#### 3.2.11 操作系统用户列表

- **功能描述**：用户获取 Linux 操作系统用户列表。
- **输入**：无
- **输出**：操作系统用户列表

### 3.3 日志审计功能

- **功能描述**：管理员获取系统日志，用于行为审计。
- **输入**：时间范围
- **输出**：日志记录

### 3.4 安全需求

- **认证**：所有 API 请求需通过用户认证，使用 Session 机制并设置合理的 Session 过期时间。
- **授权**：根据用户角色（运维人员或管理人员）限制 API 访问权限。
- **哈希和加密**：密码等敏感信息需加盐哈希后存储，并在前后端交互过程中加密传输。
- **访问控制**：管理人员可以设置用户的基础目录，限制运维人员的文件访问范围。
- **日志记录**：记录所有用户操作，包括登录、文件操作等，用于审计和故障排查。

### 3.5 性能需求

- **响应时间**：API 响应时间不超过 2 秒。
- **并发性**：系统应能支持至少 50 个并发用户。

### 3.6 数据存储需求

- **本地 JSON 存储**：系统数据（如用户信息、日志等）存储在本地 JSON 文件中。
- **文件操作**：利用 Linux 服务器的文件系统实现文件的创建、读取、写入、删除等操作。

### 3.7 用户界面需求

- **易用性**：界面应简洁明了，易于操作。
- **错误处理**：应有明确的错误提示和解决方案建议。

## 4. 附录

### 4.1 参考文献

- [FastAPI 官方文档](https://fastapi.tiangolo.com/)
- [OpenAPI 3.1 规范文档](https://spec.openapis.org/oas/v3.1.0.html)

### 4.2 版本历史

- **版本 1.0**：2025 年 3 月 16 日，初次发布